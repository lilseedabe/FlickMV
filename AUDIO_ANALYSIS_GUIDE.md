# FlickMV 音声解析機能 - セットアップ＆使用方法ガイド\n\n## 🎯 新機能概要\n\nGroqのWhisper-large-v3を使用して、音声ファイルを日本語テキストに変換し、AIによってシーン別のMV（ミュージックビデオ）生成プロンプトを自動提案する機能を追加しました。\n\n### ✨ 機能詳細\n\n1. **音声テキスト化**: Groq Whisper-large-v3による高精度な日本語音声認識\n2. **AI分析**: 歌詞の内容と感情を分析\n3. **シーン分割**: 音声のタイムスタンプに基づいたシーン自動分割\n4. **プロンプト生成**: 各シーンに適した映像生成プロンプトの提案\n5. **手動編集**: 生成されたプロンプトの編集・カスタマイズ\n\n## 🛠 セットアップ\n\n### 1. Groq APIキーの取得\n\n1. [Groq Console](https://console.groq.com)にアクセス\n2. アカウント作成・ログイン\n3. API Keysセクションから新しいAPIキーを作成\n4. APIキーをコピー（後で使用）\n\n### 2. 環境変数の設定\n\n#### サーバー側設定 (.env)\n```bash\n# AI Services\nGROQ_API_KEY=your-groq-api-key-here\n```\n\n### 3. 依存関係のインストール\n\n#### サーバー側\n```bash\ncd server\nnpm install axios form-data\n```\n\n#### クライアント側\n```bash\ncd client\nnpm install\n# 既存の依存関係で対応可能\n```\n\n### 4. サーバー再起動\n\n```bash\ncd server\nnpm run dev\n```\n\n## 🎵 使用方法\n\n### 1. 音声ファイルのアップロード\n\n1. エディターページを開く\n2. 左パネルの「メディア」タブを選択\n3. 音声ファイル（.mp3, .wav, .m4a等）をアップロード\n\n### 2. 音声解析の実行\n\n1. アップロードされた音声ファイルにマウスオーバー\n2. 表示される紫色の**脳アイコン**をクリック\n3. 解析オプションを設定：\n   - **音楽ジャンル**: ポップス、ロック、バラード等\n   - **雰囲気**: 明るい、感動的、力強い等\n   - **映像スタイル**: モダン、シネマティック、アニメ風等\n4. 「音声解析開始」ボタンをクリック\n\n### 3. 解析結果の確認\n\n解析完了後、以下の情報が表示されます：\n\n#### 📝 音声テキスト化結果\n- 音声から変換された歌詞テキスト\n- セグメント別のタイムスタンプ付きテキスト\n\n#### 🎨 全体テーマ\n- 楽曲全体のコンセプトとテーマ提案\n\n#### 🎬 シーン別MVプロンプト\n各シーンごとに以下の情報を提供：\n- **タイムスタンプ**: 開始・終了時間\n- **歌詞**: 該当部分の歌詞\n- **映像プロンプト**: 詳細な映像生成指示\n- **雰囲気**: シーンの感情的トーン\n- **カラーパレット**: 推奨色彩\n- **キーワード**: 関連キーワード\n\n#### 💡 制作提案\n- カメラワーク提案\n- エフェクト提案\n- トランジション提案\n- 全体構成提案\n\n### 4. プロンプトの編集・カスタマイズ\n\n1. 各シーンの**編集アイコン**をクリック\n2. 映像プロンプトを自由に編集\n3. 「変更を保存」ボタンで保存\n\n### 5. プロンプトの再生成\n\n1. 解析オプションを変更\n2. 「プロンプト再生成」ボタンをクリック\n3. 新しい設定でプロンプトを再生成\n\n## 🎮 実用的な使用例\n\n### ケース1: ポップスソング\n```\n設定:\n- ジャンル: ポップス\n- 雰囲気: 明るい\n- スタイル: モダン\n\n生成例:\n- イントロ: \"カラフルな背景に踊る光の粒子、明るく元気な雰囲気\"\n- サビ: \"歌手が笑顔で歌う様子、虹色のライティング効果\"\n```\n\n### ケース2: バラード\n```\n設定:\n- ジャンル: バラード\n- 雰囲気: 感動的\n- スタイル: シネマティック\n\n生成例:\n- 冒頭: \"夕焼けを背景にした静かな街並み、温かみのある照明\"\n- 転調部: \"感情が高まる瞬間、カメラが緩やかにズームイン\"\n```\n\n## ⚙️ 詳細設定オプション\n\n### 音楽ジャンル選択\n- **自動判定**: AIが音楽を分析して自動判定\n- **ポップス**: 明るく親しみやすい映像\n- **ロック**: エネルギッシュで力強い映像\n- **バラード**: 感情的で落ち着いた映像\n- **ヒップホップ**: リズミカルでストリート感のある映像\n- **エレクトロニック**: 未来的でデジタル感のある映像\n- **ジャズ**: 洗練されたクラシカルな映像\n- **クラシック**: 上品で格調高い映像\n\n### 雰囲気設定\n- **自動判定**: 歌詞の内容から自動判定\n- **明るい**: ポジティブで元気な映像\n- **感動的**: 心に響く感情的な映像\n- **力強い**: ダイナミックで迫力のある映像\n- **穏やか**: 静かで癒やし系の映像\n- **ドラマチック**: 劇的で印象的な映像\n- **ノスタルジック**: 懐かしさを感じる映像\n\n### 映像スタイル\n- **モダン**: 現代的でスタイリッシュ\n- **シネマティック**: 映画的でドラマチック\n- **アニメ風**: アニメーション的表現\n- **リアリスティック**: 現実的で自然な表現\n- **アート**: 芸術的で抽象的\n- **レトロ**: 懐かしい雰囲気\n\n## 🔧 トラブルシューティング\n\n### よくある問題と解決方法\n\n#### 1. 「Audio analysis service is not configured」エラー\n**原因**: Groq APIキーが設定されていない\n**解決方法**: \n```bash\n# .envファイルに追加\nGROQ_API_KEY=your-actual-api-key\n```\n\n#### 2. 解析が開始されない\n**原因**: プランの制限または音声ファイル形式\n**解決方法**: \n- プロプラン以上が必要\n- 対応形式: MP3, WAV, M4A\n- ファイルサイズ: 50MB以下\n\n#### 3. 解析がタイムアウトする\n**原因**: 音声ファイルが長すぎる\n**解決方法**: \n- 5分以下の音声ファイルを使用\n- より短い音声に分割\n\n#### 4. 日本語認識精度が低い\n**原因**: 音質やノイズの問題\n**解決方法**: \n- 高音質な音声ファイルを使用\n- ノイズを除去\n- 明瞭な発音の音声を使用\n\n## 📊 料金・制限事項\n\n### プラン別制限\n- **フリープラン**: 音声解析機能は利用不可\n- **プロプラン**: 月5回まで音声解析可能\n- **プレミアムプラン**: 月20回まで音声解析可能\n\n### ファイル制限\n- **最大ファイルサイズ**: 50MB\n- **対応形式**: MP3, WAV, M4A, AAC\n- **最大音声長**: 5分\n\n### API制限\n- **音声解析**: 1時間に5回まで\n- **プロンプト再生成**: 1時間に10回まで\n\n## 🚀 今後の予定\n\n### 近日追加予定\n1. **多言語対応**: 英語、中国語、韓国語の音声解析\n2. **感情分析強化**: より詳細な感情分析\n3. **音楽分析**: BPM、キー、コード進行の自動検出\n4. **テンプレート機能**: ジャンル別プロンプトテンプレート\n5. **バッチ処理**: 複数ファイルの一括解析\n\n### 長期ロードマップ\n1. **AI映像生成連携**: 生成されたプロンプトから直接映像生成\n2. **リアルタイム解析**: ライブ音声のリアルタイム解析\n3. **協調編集**: チームでのプロンプト共同編集\n4. **A/Bテスト**: 複数プロンプトバリエーションの比較\n\n## 💡 活用のコツ\n\n### 1. 効果的なプロンプト生成のために\n- **音声品質**: クリアで聞き取りやすい音声を使用\n- **ジャンル設定**: 正確なジャンル選択で適切なプロンプト生成\n- **雰囲気調整**: 楽曲の感情に合った雰囲気設定\n\n### 2. プロンプト編集のベストプラクティス\n- **具体性**: 抽象的ではなく具体的な描写を追加\n- **視覚要素**: 色彩、照明、構図を明確に指定\n- **感情表現**: 感情や雰囲気を織り込む\n\n### 3. 効率的なワークフロー\n1. 複数の設定で解析を試行\n2. 気に入ったプロンプトをベースに編集\n3. シーン間の連続性を考慮\n4. 全体的な統一感を保持\n\n## 📞 サポート\n\n### お問い合わせ\n- **技術的問題**: support@flickmv.com\n- **機能リクエスト**: features@flickmv.com\n- **ドキュメント**: https://docs.flickmv.com\n\n### コミュニティ\n- **Discord**: https://discord.gg/flickmv\n- **GitHub**: https://github.com/flickmv/flickmv\n- **YouTube**: チュートリアル動画を公開中\n\n---\n\n**最終更新**: 2025年8月17日  \n**バージョン**: 1.2.0  \n**作成者**: FlickMV開発チーム\n